language: node_js

node_js:
  - '8'
  - '4'

# add SUITE=lint for node_js, allow failing PM=yarn
matrix:
  include:
    - env: SUITE=lint
  allow_failures:
    - env: SUITE=test-travis PM=yarn

env:
  global:
  - PM=npm
  - REACT_MAJOR=16
  # multiply node_js versions with these env sets
  matrix:
  - SUITE=test-travis REACT_MAJOR=15
  - SUITE=test-travis REACT_MAJOR=16
  - SUITE=test-travis PM=yarn

before_install:
  # remove yarn.lock to force travis to use npm
  - if [ "$PM" = "npm" ]; then
      rm yarn.lock;
    fi

script:
  - npm run $SUITE
